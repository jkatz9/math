\subsection{Main Theorem}
\subsubsection*{Definitions}
\begin{comment}
Let $R$ be a commutative ring (with 	$). An algebra $(A,\iota)$ over $R$ is an associative ring $A$ with 	$ equipped with an embedding $\iota : R \to A$ of rings, mapping 	 \in R$ to 	 \in A$ such that $\iota(R)$ is contained in the center of $A$. Using $\iota$, we identify $R$ with a central subring of $A$ and suppress reference to $\iota$.

A \textbf{standard involution} on $B$ is an anti-involution $\overline{\cdot}: A \to A$ such that $x\overline{x} \in A$ for all $x\in A$. Given a standard involution on $A$, define the \textbf{reduced trace},\textbf{reduced norm}, and \textbf{characteristic polynomial} of an element of $A$ by
\begin{align*}
	\trd:         & A \to R, \quad \trd(x)    & = x + \overline{x}         \\
	\nrd:         & A \to R, \quad \nrd(x)    & = x\overline{x}            \\
	\mu(\cdot;T): & A \to R[T] \quad \mu(x;T) & = T^2 - \tr(x) T +\nrd(x).
\end{align*}

\end{comment}
\begin{comment}
In this section $R$ is an integral domain, and $k$ is its field of fractions, and $A$ a finite dimensional algebra over $k$ with unit element 	_A$. A finitely generated $R$-submodule $M$ of $A$ is a \textbf{lattice}, and is \textbf{full} if $kM=A$. A full lattice in $A$ is an \textbf{order} if it is a subring containing 	_A$.

Given a full lattice $M$ in $A$, the sets
\begin{align*}
	\Ocal_\ell(M)= \{ x \in A: xM \subset M\} \\
	\Ocal_r(M)= \{ x \in A: Mx \subset M\}
\end{align*}
are orders in $A$, and are called the \textbf{left}/\textbf{right} orders of $M$ respectively.
\begin{defn}

\end{defn}

\end{comment}
\paragraph{Notation}
Throughout $k$ will denote a number field, and $R$ its ring of integers. We write $V_k$ for its set of places, and write $\nu \in V_k^\infty$ (resp. $\nu \in V_k^f$) if $\nu$ is archimedian (resp. nonarchimedian).
We identify nonarchimedian places $\nu \in V_k^f$ with discrete valuations $\nu : k \to \Zbb$ on $k$ and in turn, prime ideals $\pfrak = \{ x \in k: \nu(x) > 0\}$ in $R$.
For a place $\nu \in V_k$ we write $k_\nu$ for the corresponding local field, and if $\nu \in V_k^f$ corresponding to a prime ideal $\pfrak$ of $R$ we write $R_\nu$ or $R_\pfrak$ for the closure of $R$ in $k_\nu$.
We pick for each finite place $\pfrak$, once and for all, a uniformizer $\varpi \in R_\pfrak$ for its unique maximal ideal.

For an integral ideal $\afrak$ in $R$, we write $\pi_\afrak : R \to R/\afrak$ for the reduction map.
\subsubsection{Theorem}
Let $k \leq \Rbb$ be a totally real number field, and $A$ a quaternion algebra over $k$ which is unramified over the identity embedding $k\to \Rbb$, and ramified over all other infinite places.
If $B$ is a subring of $A$, we write $B^1$ for the multiplicative subgroup of $A^\times$ consisting of elements of $B$ with reduced norm $1$.
An isomorphism $\phi : A\otimes_k \Rbb \to M(2,\Rbb)$ of algebras, restricts to an isomorphism $(A\otimes_k \Rbb)^1 \to \SL(2,\Rbb)$ of groups. Composing $\phi$ with the canonical projection $\SL(2,\Rbb)  \to \PSL(2,\Rbb)$ we obtain a homomorphism $\psi : A^1 \to \PSL(2,\Rbb)$ which factors through $\pm 1 \lmod A^1$.

For an order  $\Ocal \subset A$ in $A$, write $\Ocal^1 = A^1 \cap \Ocal$. We call the subgroup $\psi(\Ocal^1)\leq \PSL(2,\Rbb)$ the arithmetic Fuchsian group associated to the datum $k$,$A$,$\psi$,$\Ocal$.

We write this group as $\Gamma_{k,A,\psi,\Ocal}$, or just by $\Gamma_\Ocal$ if $k,A,\psi$ are fixed. A fuchsian group is \textbf{arithmetic} provided it is commensurable to one of the form $\Gamma_{k,A,\psi,\Ocal}$, and say that it is \textbf{derived} from the quaternion algebra $A$ if is a subgroup of some $\Gamma_{k,A,\psi,\Ocal}$.

\begin{rem}
	Some comments about this definition:
	\begin{enumerate}
		\item Given any Fuchsian group $\Lambda$, there is at most one number field $k$, and quaternon algebra $A$ over $k$, such that $\Lambda$ is commensurable to $\psi(\Ocal^1)$ for some order $\Ocal$ in $A$. Thus, for arithmetic Fuchsian groups, the pair $(k,A)$ is a complete invariant of commensurability classes.
		\item If $\Lambda$ is an arithmetic lattice derived from the quaternion algebra $k,A$, then there are only finitely many orders $\Ocal$ in $A$ such that $\Lambda$ is contained in $\psi(\Ocal^1)$.
		\item For any order $\Ocal$ in a quaterion algebra $A$, the set of maximal orders containing $\Ocal$ is finite and nonempty.
	\end{enumerate}
\end{rem}

For an integral ideal $\afrak$ in $R$, the map $\pi_\alpha: \Ocal \to \Ocal \otimes_R R/\afrak$ is a surjective ring homomorphism.
the \textbf{principal congruence subgroup } of level $\afrak$ in an order $\Ocal$ is the subgroup of $\Ocal^1$ given by
\begin{align*}
	\Ocal^1(\afrak) = \{ x \in \Ocal^1 : x - 1 \in \afrak \Ocal^1\}.
\end{align*}

We let $\pi_\afrak$ denote the projection $\Ocal^1 \to (\Ocal \otimes_R R/\afrak)^1$.   % there is a short exact sequence  \begin{align*} 1 \to \Ocal^1(\afrak) \to \Ocal^1 \to (\Ocal \otimes_R R/\afrak)^1 \to 1 \end{align*}

If $\Lambda$ is any subgroup of $\PSL(2,\Rbb)$ which is commensurable to $\psi(\Ocal^1)$, we write $\Lambda(\afrak,\Ocal)$, or just $\Lambda(\afrak)$ if $\Ocal$ is understood, for
\[\ker \pi_\alpha \vert_\Lambda = \Lambda \cap \psi(\Ocal^1(\afrak)) =\{g \in \Lambda: g \equiv 1 \mod \alpha\}\]
and write $\Lambda[\afrak]$ for its image. Thus,
\begin{align*}
	\Lambda / \Lambda(\afrak) =	\Lambda[\afrak] \leq O^1[\afrak]= O^1/O^1(\afrak)
\end{align*}



% \begin{rem}
% 	The reduction map $R \to R/\afrak$ induces a projection $\Ocal \to \Ocal \otimes_R R/\afrak \approx \Ocal / \afrak \Ocal$ of algebras, and in turn a projection $\pi_\afrak:\Ocal^1 \to (\Ocal \otimes_R R/\afrak)^1$ of groups. Then $\Ocal^1(\afrak) = \ker \pi_\alpha$.
% \end{rem}

% \subsection{Length spectra of arithmetic Fuchsian groups}
% Fix an arithmetic datum $(k,A,\psi,\Ocal)$ as above such that $\Ocal$ is a \emph{maximal order} in $A$, and set $\Gamma = \Gamma_{k,A,\psi,\Ocal}$. In this section, we will compute the length spectrum of the surface $X=\Gamma \lmod \Hbb$ in terms of the arithmetic of $k$.

% \subsubsection*{Geodesics as conjugacy classes}
% The quotient map $\Hbb \to \Gamma \lmod \Hbb = X$ is the universal cover, and identifies $\Gamma$ with $\pi_1(X)$. Consequently, we may identify free homotopy classes of closed curves in $X$ with conjugacy classes in $X$. As $X$ has negative curvature, there is a unique geodesic representative in each free homotopy class on $X$. Thus, we may identify the set of geodesics on $X$ with conjugacy classes in $\Gamma$. Given a conjugacy class $\gamma \subset \Gamma$, we write $\ell(\gamma)$ for the length of the corresponding geodesic.  Each $g\in \gamma$ has a unique lift $\tilde{g}$ to $\SL(2,\Rbb)$ with positive trace. We write $\tr(g)$ for $\tr(\tilde{g})$, and set
% \begin{align*}
% 	\lambda_g = \frac{t_g + \sqrt{t_g^2 - 4}}{2}.
% \end{align*}
% Then the length of the geodesic corresponding to $\gamma$ is related to $\lambda_g$ by the formula:
% \begin{align*}
% 	\lambda_g^2 = \exp(\ell(g)).
% \end{align*}

% \subsubsection*{Conjugacy classes in quaternion algebras and orders}
% In this section $F$ is a number field with number field $R$, $A$ a quaternion algebra over $F$, and $\Ocal$ a maximal order in $A$.

% The algebra $A$ is equipped with an (anti-)involution $\overline{\cdot}$ and reduced norm/trace maps:
% \begin{align*}
% 	\trd(x) & = x+\overline{x} \\
% 	\nrd(x) & = x\overline{x},
% \end{align*}
% and every element $x\in A$ satisfies its characterstic polynomial
% \begin{align*}
% 	\chi(x;T)= T^2 - \trd(x) T + \nrd (x).
% \end{align*}

% Given an element $x\in A$, let $F[x] \subset A$ be the smallest $F$-subalgebra of $A$ containing $x$.
% \begin{claim}
% 	For $x\in A$, set $\delta=\delta(x)$
% 	\begin{align*}
% 		F[x] \approx \begin{cases}
% 			             F                 & \text{ if $x\in F$}                                                     \\
% 			             F \oplus F        & \text{if $\delta \in  (F^\times)^2$ and $x\notin F$}                    \\
% 			             F[\sqrt{\delta}]  & \text{if $\delta \in  F^\times \setminus (F^\times)^2$ and $x\notin F$} \\
% 			             F[\eps]/(\eps^2 ) & \text{if $\delta=0$ and $x\notin F$},
% 		             \end{cases}
% 	\end{align*}
% 	as $F$-algebras.
% \end{claim}
% We say $x\in A$ is semsimple in the first three cases, and regular semisimple in the second and third cases.

% \begin{claim}
% 	If $x \in A^\times$ is noncentral, then the centralizer of $x$ in $A^\times$ is $F[x]^\times$.
% \end{claim}

% We view $A$ as four dimensional affine space over $F$, and write $F[A]$ for its coordinate ring. Then $A^\times$ is the principal open subvariety of $A$ defined by the nonvanishing of $\nrd$. Its coordinate ring  $F[A^\times]$ is the localization $F[A]_{\nrd} = F[A,\nrd^{\inv}]$ of $F[A]$ away from the zero locus of $\nrd$.

% For $g \in A^\times$ and $f\in F[A]$ or $F[A^\times]$, write  $f^g$ for the function $x \mapsto  f( g x g^\inv)$. For $x\in A$, write $O(x) = \{ x^g : g \in A^\times\}\subset A$ for its orbit under conjugation by $A^\times$.

% \begin{claim}\label{orbits}
% 	For noncentral $x\in A^\times$, the orbit $O(x)$ is Zariski-closed in $A$ (and $A^times$) if and only if $x$ is not parabolic. All parabolic elements in $A^\times$ constitute a single conjugacy class, and the Zariski closure of this class is zero locus of $\delta = \trd^2-4\nrd$.
% 	% say $\Ucal$. The complement of $\Ucal$ in its Zariski closure $\overline{\Ucal}$ is the center $F^\times$ of $A^\times$. 
% \end{claim}
% \begin{claim}
% 	\begin{enumerate}
% 		\item The algebra $F[A]^{A^\times}$ of invariants in $F[A]$  under $A^\times$ is generated as an $F$ algebra by $\trd$ and $\nrd$.
% 		\item The map $(\trd,\nrd):A \to \Abb_F^2$ dual to the inclusion $F[A]^{A^\times} \to F[A]$ is a GIT quotient for the conjugation action of $A^\times$ on $A$ in the sense that its fibers are Zariski closures of conjugacy classes.
% 		\item The restriction of $(\trd,\nrd)$ to the open subset $A^{*}$ of regular semisimple elements is a genuine orbit map, in the sense that its fibers are $A^\times$ conjugacy classes in $A$.
% 	\end{enumerate}
% \end{claim}


\begin{thm}
	Let $\Gamma=\Gamma_{k,A,O}$ denote a maximal arithmetic lattice in $G=\PSL(2,\Rbb)$, arising from the arithmetic datum $(k,A,O)$ (as above) such that $A$ has type number $1$. Let $\afrak$ be a squarefree ideal in $R_k$ which are not divisible by any prime over which $A$ ramifies, nor any dividing $2$ or $3$, the hyperbolic surface $X(\afrak)=\Gamma(\afrak) \lmod G \rmod K$ is absolutely spectrally rigid.
\end{thm}
\begin{proof}
	In what follows, we suppose $M$ is a closed Riemannian manifold which is isospectral to $X(\afrak)$.

	\begin{claim}\label{claim:heat}
		The dimension, volume, and mean scalar curvature of $M$ and $X(I)$ coincide.
	\end{claim}



	\begin{lemma}
		Let $X$ be a Riemannian manifold, with Laplace spectrum $0\geq \lambda_0 \geq \lambda_1 \geq \cdots$, and let $K_X(t)=\sum_{i=1}^\infty e^{\lambda_i t}$. Then $K_X(t)$ admits an asymptotic expansion as $t\to 0^+$ of the form
		\[ K_X(t) \sim (4\pi t)^{-\dim(X)/2} \sum_{n=0}^\infty a_n(X) t^n \]
		for constants $a_i(X)$ which are integrals over $X$ of polynomials in the entries of the curvature tensor of $X$ and its covariant derivatives. The first two are:
		\[a_0(X) = \Vol(X),\quad a_1(X) = \frac{1}{6} \int_X \tr {\rm Ricc} (x) \dop \Vol(x).\]
	\end{lemma}

	Indeed, since $K_M(t) = K_{X(I)}(t)$ identically, we may read off the invariants in the claim from their common asymptotic expansions as $t\to 0^+$.
	\begin{rem}
		The total scalar curvature of a smooth, closed surface is its Euler characteristic by Gauss-Bonnet. As the euler characteristic is a complete invariant of the diffeomorphism type for closed surfaces, we may thus conclude that $M$ and $X(I)$ are in fact diffeomorphic.
	\end{rem}

	[TODO]: argue that $M$ must have constant negative curvature $=-1$. We'll do so either via one of the following routes:
	% \begin{itemize}
	% 	\item look at the the full set of heat invariants, and argue that they detect variation in curvature eventually
	% 	\item apply the theorem of patodi which says that if a closed $d$ manifold $X$ has constant negative curvature, and $M$ is isospectral to $X$ on $p$-forms for $0\leq p \leq d$, then $M$ also has constant negative curvature. Need to argue tho that isospectrality on $0$ forms implies the same for $1$ forms on surfaces (is this true in general?)
	% 	\item apply the theorem of BCG which says that, at least for closed $2$ manifolds, within a conformal class of metrics on a closed surface $X$ with fixed volume, the entropy of the geodesic flow is minimized at the unique metric of constant curvature. Here we need to argue that that entropy is, in fact, a spectral invariant.
	% \end{itemize}


	As $M$ is a compact hyperbolic $2$-manifold, it admits a Fuchsian uniformization $M \approx \Lambda \lmod \Hbb^2$, where $\Lambda$ is a uniform lattice in $\PSL(2,\Rbb)$.
	\begin{claim}
		After conjugating by an element of $\PSL(2,\Rbb)$ we may take $\Lambda$ to be a finite index subgroup of $\Gamma = \rho(O^1) \leq  \PSL(2,\Rbb)$.
	\end{claim}
	\begin{proof}
		This claim follows from two theorems.

		First, we apply the following theorem to conclude that $\Lambda$ is arithmetic.
		\begin{thm}[Takeuchi \cite{takeuchiCharacterizationArithmeticFuchsian1975}]\label{thm:takeuchi}
			Let $\Gamma$ be a Fuchsian group of the first kind. Then $\Gamma$ is an arithmetic Fuchsian group derived from a quaternion algebra if and only if $\Gamma$ satisfies the following conditions
			\begin{enumerate}
				\item The subfield $k$ of $\Cbb$, generated over $\Qbb$ by the traces of elements of $\Gamma$, has finite degree over $\Qbb$
				\item $\tr(\Gamma)$ is contained in the ring of integers $R_{k}$ of $k$
				\item For any isomorphism $\phi: k \to \Cbb$ such that $\phi \neq \id$, the set $\phi(\tr(\Gamma))$ is bounded in $\Cbb$.
			\end{enumerate}
		\end{thm}
		As these conditions are satisfied for $\Gamma(I)$, and $\tr(\Gamma(I)) = \tr(\Lambda)$, there are also satisfied for $\Lambda$. Thus, $\Lambda$ is a finite index subgroup of the norm one units of \emph{some} maximal order in \emph{some} quaternion algebra over $k$.

		The second theorem demonstrates that this quaternion algebra is in fact $A$.
		\begin{thm}[Reid \cite{reidIsospectralityCommensurabilityArithmetic1992}]
			Let $M_1$ and $M_2$ be isospectral arithmetic hyperbolic $2$ or $3$ manifolds. Then $M_1$ and $M_2$ are commensurable.
		\end{thm}
		For arithmetic hyperbolic $2$- and $3$-manifolds, commsurability is tantamount to an isomorphism of invariant quaternion algebras.

		From theorem \ref{thm:takeuchi}, $\Lambda$ is contained in $\rho(O'^1)$ for some maximal order $O'$ in $A$. Since $A$ has type number $1$, all maximal orders in $A$ are conjugate (by an element of $A^\times$). Consequently we may take $O'=O$, so that $\Lambda \leq \Gamma = \rho(O^1)$ as claimed.


	\end{proof}

	% From claim \ref{claim:heat},  $\vol(\Lambda \lmod \Hbb^2) = \vol(\Gamma(I) \lmod \Hbb^2)$ and each of these is equal to the respective group's index in $\Gamma$, we find $|\Gamma: \Gamma(I)| = |\Gamma: \Lambda|$.

	% \begin{rem}
	% 	As $\Gamma(I)$ and $\Lambda$ are both contained in $\Lambda = PO^1 = \pm 1 \lmod O^1$, there is no harm in lifting everything to $O^1$. We do so, and reuse the same notation for lifts.
	% \end{rem}



	\begin{comment}
	At this point, we do not know if $\Lambda$ is a \emph{congruence} subgroup of $\Gamma$. That is, we do not know if $\Lambda = A^1 \cap \prod_{\pfrak} \Clo_\pfrak(\Lambda) = \Lambda$ (product taken inside $(A\otimes \Abb_k)^1$)

	(Equivalently, we do not know if $\Gamma(J) \leq \Lambda$ for some ideal $J$ of $R$)
	\end{comment}
	\input{trace-lemma.tex}
	\newpage
	Let $\tilde{\Lambda}$ be the \textbf{congruence closure} of $\Lambda$ in $\Gamma$. That is, $\tilde{\Lambda}$ is the smallest congruence subgroup of $\Gamma$ containing $\Lambda$. Alternatively, one has the description of $\tilde{\Lambda}$ as $\tilde{\Lambda} = \bigcap_{J \triangleleft R}\Gamma(J)\Lambda$.

	\begin{claim}\label{claim:modJ}
		Let $J$ be an ideal in $R$  and $H$ a subgroup of $\Gamma$. Then the following are equivalent:
		\begin{enumerate}
			\item $H\Gamma(J) = \Gamma$
			\item $H\cap \Gamma(J) = \Gamma(J)$
			\item The restriction of the natural projection $\Gamma \to \Gamma/\Gamma(J)$ to $H$ is surjective
		\end{enumerate}
		Furthermore, if $J=\prod_\pfrak \pfrak^{j_\pfrak}$ then each of these conditions holds if and only if it holds at $\pfrak^{j_\pfrak}$.
	\end{claim}

	\begin{claim}
		Let $J$ be an ideal in $R$ which is coprime to $I$. Then $\Lambda \Gamma(J) = \Gamma$.
	\end{claim}
	\begin{proof}
		By the previous claim, it suffices to assume that $J= \pfrak^n$ is a prime power.
	\end{proof}


	\begin{comment}
	\begin{rem}
		As $\Lambda$ and $\Gamma(I)$ are contained in $\Gamma$ and $\Gamma(I)$ is normal in $\Gamma$, the subgroup $\Gamma(I)\Lambda$ of $\Gamma$ is a congruence subgroup containing $\Lambda$.
		Consequently, $\tilde{\Lambda}\leq \Gamma(I)\Lambda$.
		Further, if we write $\Lambda(I) = \Gamma(I) \cap \Lambda$ for the kernel of the restriction to $\Lambda$ of $\pi_I$ (reduction mod $I$), then $\Gamma(I)\Lambda/\Gamma(I) \approx \Lambda / \Lambda(I)$ may be identified with a subgroup of $\SL(2,R/I)$ in such a way that the mod-$I$ reduction of trace on $\Lambda$ (as an element of $A$) coincides with the trace on $\SL(2,\R/I)$ %(as autormophisms of the free $R/I$ module $(R/I)\bigoplus (R/I)$.)
	\end{rem}
	\end{comment}


	\begin{lemma}
		Let $\pfrak$ be a prime ideal of $R$, not dividing $2$ or $3$. Suppose $H$ is a closed subgroup of $\SL(2,R_\pfrak)$ such that $\tr(H) = R_\pfrak$. Then $H = \SL(2,R_\pfrak)$.
	\end{lemma}
	\begin{proof}
		The claim will follow from the analogous statement over the residue field $\kfrak = R/\pfrak$. Indeed, if $H$ is a closed, proper subgroup of $\SL(2,R_\pfrak)$ for which $\tr(H) = R_\pfrak$, then its reduction $H(\pfrak)$ mod $\pfrak$ would be a proper subgroup of $\SL(2,\kfrak_\pfrak)$ for which $\tr H(\pfrak) = \kfrak_\pfrak$.

		Suppose then that $G \leq \SL(2,\Fbb_q)$ is a subgroup for which $\tr(G) = \Fbb_q$. Let $\zeta$ be a primitive $q-1$st root of unity in $\Fbb_q$, and let $\delta$ be a primitive $q+1$st root of unity in the unique quadratic extension $\Fbb_{q^2}$ over $\Fbb_{q}$. Let $t_\zeta = \zeta+ \zeta^\inv$ and $t_\delta = \delta +\delta^\inv$

		As $\tr(G) = \Fbb_q$, there exist elements $g_\zeta$ and $g_\delta$ in $K$ such that $\tr(g_\zeta)=t_\zeta$ and $\tr(g_\delta)= t_\delta$ respectively. Note that $g_\zeta$ (resp. $g_\delta$) has order $q-1$ (resp. $q+1$), as can be seen by diagonalizing. Set $A = \langle g_\zeta\rangle$ and $K = \langle g_\delta \rangle$, and note that $A\cap K = \{1\}$.

		Let $C$ be the subgroup of $G$ generated by $A$ and $K$. Then $|C|\geq (q-1)(q+1)=|A||K|$, so that $|\SL(2,\Fbb_q) : C| \leq q$. As the minimal index of a proper subgroup of $\SL(2,\Fbb_q)$ is $q+1$, we conclude that $C$, and therefore $G$, is equal to $\SL(2,\Fbb_q)$.
	\end{proof}


	\section{local computations}
	In this section, $k$ is a nonarchimedian local field of characteristic zero, $\nu$ a normalized additive valuation, $R$ its valuation ring, $\mfrak$ the unique maximal ideal of $R$, uniformizer $\varpi \in \mfrak$, and residue field $\kfrak$ of characterstic $p$ and cardinality $q$.


	\subsection*{Split case}
	In this section, let $G=\SL(2,k)$. Define closed subgroups
	\begin{align*}
		A & = \{ \Tbt{x}{}{}{x^\inv}: x \in k^\times \}              \\
		U & = \{ \Tbt{1}{y}{}{1}: y \in k \}                         \\
		B & = \{\Tbt{x}{y}{}{x^\inv} : x \in k^\times, y \in k\}=AU,
	\end{align*}
	and elements
	\begin{align*}
		w      & = \Tbt{0}{-1}{1}{0} \\
		\alpha & = \Tbt{\pi}{}{}{1}
	\end{align*}
	of $\GL(2,k)$.

	For a positive integer $n$, let $\pi_n : \SL(2,R) \to \SL(2,R/\mfrak^n)$ be the natural projection. For any subgroup $H$ of $G$, we set $H(R) = H \cap \SL(2,R)$, and $H(\mfrak^n)= \ker (\pi_n\vert_H)$.

	\begin{claim}
		(a) $K=\SL(2,R)$ is a maximal compact open subgroup of $G$. (b) The subgroups $K(\mfrak^n)$ constitute neighborhood basis of the identity in $K$. (c) There are exactly two conjugacy classes of maximal compact open subgroups of $G$. Representatives for these classes are given by $K$ and $\alpha K \alpha^\inv$.
	\end{claim}






	\subsection*{poo}
	Let $V$ be a $2$-dimensional vectorspace over $k$. Then $\End_k(V)$ is a quaternion algebra over $k$. Let $\Mcal$ denote the set of maximal orders in $\End_k(V)$.

	For any lattice $L$ in $V$, the set
	\begin{align*}
		\End(L) = \{x \in \End_k(V): x L \leq L\}
	\end{align*}
	is a maximal order in $\End_k(V)$, and every maximal order in $\End_k(V)$ takes the form $\End(L)$ for some lattice $L$ in $V$. Thus, the map $L \mapsto \End(L)$ is a surjection from the set  $\Lcal$ of lattices in $V$ to the set $\Mcal$ of maximal orders in $\End_k(V)$.

	Two lattices $L,M$ satisfy $\End(L)=\End(M)$ if and only if $L=s M$ for some $s\in k^\times$. In this case, $L$ and $M$ are said to be \textbf{homothetic}, and we write $[L]$ for the homothety class of a lattice $L$.  Evidently, the map $L \mapsto \End(L)$ factors through the projection $L\mapsto [L]$ and establishes a bijection between the set $\Hcal$ of homothety classes of lattices in $V$ and the set $\Mcal$ of maximal orders in $\End_k(V)$.

	There is a natural action of $\PGL(V)$ on $\Hcal$ by left muliplication, and on $\Mcal$ by conjugation. The bijection $\Hcal \to \Mcal$ described above is $\PGL(V)$ equivariant. The stabilizer of a homothety class $\Lambda$ is $\PGL(L) = R^\times \lmod \GL(L)$ where $L$ is a lattice representing $\Lambda$, and $\GL(L) = \{x \in \End_k(V): xL = L\}$, and the stabilizer of a maximal order $\Ocal$ is the image in $\PGL(V)$ of the group $\{x \in \GL(V) : x \Ocal x^\inv = \Ocal\}$.



	% For a pair of homothety classes $\Lambda,\Lambda' \in \Hcal$, choose representatives $L \in \Lambda,L'\in\Lambda'$ so that $L'\leq L$. Then by the invariant factor theorem over $R$, we may pick a basis $u,v$ for $L$ such that $\pi^a u, \pi^b v $ is a basis for $L'$. The quantity $|a-b|$ is independent of the choice of representatives, and defines a distance function $d$ on $\Hcal$. 

	We say that two classes $\Lambda,\Lambda' \in \Hcal$ are adjacent, and write $\Lambda\sim\Lambda'$ if there exist representative lattices $L,L'$ such that $\pi L< L'< L$ with strict containment, and we say that two maximal orders $\Ocal,\Ocal' \in \Mcal$ are adjacent, and write $\Ocal\sim \Ocal'$ if  $|\Ocal:\Ocal\cap \Ocal'| = |R:\mfrak|=q$.

	\begin{proposition}
		The bijection $\Hcal \to \Mcal$ described above is a $\PGL(V)$ equivariant isomorphism of graphs.
	\end{proposition}



	For a pair of maximal orders $\End(L)$ and $\End(L')$, the set
	\begin{align*}
		\Hom(L,L')= \{ x \in \End_k(V): xL\leq L'\}
	\end{align*}
	is a right $\End(L)$ module, and a left $\End(L')$ module. The quotients





	\section{Some diagrams}
	% https://q.uiver.app/?q=WzAsMTIsWzAsMCwiMSJdLFsxLDAsIlxcR2FtbWEoSikiXSxbMiwwLCJcXEdhbW1hIl0sWzMsMCwiXFxHYW1tYS9cXEdhbW1hKEopIl0sWzQsMCwiMSJdLFswLDEsIjEiXSxbMSwxLCJcXExhbWJkYShKKSJdLFsyLDEsIlxcTGFtYmRhIl0sWzMsMSwiXFxMYW1iZGEvXFxMYW1iZGEoSikiXSxbNCwxLCIxIl0sWzEsMiwiXFxHYW1tYShKKVxcY2FwIFxcTGFtYmRhIl0sWzMsMiwiXFxMYW1iZGFcXEdhbW1hKEopL1xcR2FtbWEoSikiXSxbMCwxXSxbMSwyXSxbMiwzXSxbMyw0XSxbNSw2XSxbNiw3XSxbNyw4XSxbOCw5XSxbNiwxLCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFs3LDIsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzgsMywiZV9cXExhbWJkYShKKSIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzYsMTAsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzgsMTEsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJzcXVpZ2dseSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
	\[\begin{tikzcd}
			1 & {\Gamma(J)} & \Gamma & {\Gamma/\Gamma(J)} & 1 \\
			1 & {\Lambda(J)} & \Lambda & {\Lambda/\Lambda(J)} & 1 \\
			& {\Gamma(J)\cap \Lambda} && {\Lambda\Gamma(J)/\Gamma(J)}
			\arrow[from=1-1, to=1-2]
			\arrow[from=1-2, to=1-3]
			\arrow[from=1-3, to=1-4]
			\arrow[from=1-4, to=1-5]
			\arrow[from=2-1, to=2-2]
			\arrow[from=2-2, to=2-3]
			\arrow[from=2-3, to=2-4]
			\arrow[from=2-4, to=2-5]
			\arrow[hook, from=2-2, to=1-2]
			\arrow[hook, from=2-3, to=1-3]
			\arrow["{e_\Lambda(J)}"', hook, from=2-4, to=1-4]
			\arrow[Rightarrow, no head, from=2-2, to=3-2]
			\arrow[Rightarrow, squiggly, no head, from=2-4, to=3-4]
		\end{tikzcd}\]










	\begin{comment}
	% \part{temp}

	% \section{probably useful references}
	% \begin{itemize}
	% 	\item \cite{chavelEigenvaluesRiemannianGeometry1984} for background on Riemannian geometry.
	% 	\item \cite{patodiCollectedPapersPatodi1996} for reflection of curvature variation in spectrum on forms.
	% \end{itemize}
	\end{comment}
	\part{dumpster}
	\paragraph{Unramified local computations} In this paragraph, $k$ is a nonarchimedian local field of characteristic $0$, maximal compact subring $R$, with maximal ideal $\mfrak$ with residue field $\ffrak = R / \mfrak$ having characteristic $p$ and cardinality $q$. We fix a uniformizer $\pi \in \mfrak$.

	Recall that:
	\begin{itemize}
		\item A quaternion algebra $\Acal$ over $k$ is a $4$-dimensional central simple $k$-algebra. Any such algebra is equipped with a canonical pair of homomorphisms $\nrd: \Acal^\times \to k^\times$ and $\trd:\Acal \to k$ called the \textbf{reduced norm} and \textbf{reduced trace}, respectively. We extend $\nrd$ to $\Acal$ by setting $\nrd(x)=0$ if $x\in \Acal \setminus \Acal^\times$. Furthermore, $\Acal$ is equipped with an anti-involution $\sigma$, which is related to $\trd$ and $\nrd$ by the formulas:
		      \begin{align}
			      \trd(x) = x+x^\sigma, \quad \nrd(x)=xx^\sigma.
		      \end{align}
		\item An $R$-order $\Rcal$ in a quaternion algebra $\Acal$ over $k$ is a unital subring which contains $R$ and is such that $k\Rcal = \Acal$, where $k\Rcal$ is the $k$-subalgebra of $\Acal$ generated by $\Rcal$. We say $\Rcal$ is a \textbf{maximal order} if it is not properly contained in any other order.
		\item An order in a quaternion algebra is an \textbf{Eichler Order} if it is the intersection of two (not necessarily distinct) maximal orders. If $\Rcal=\Rcal_1 \cap \Rcal_2$ is an Eichler order, then $\Rcal$ is a maximal subring of both $\Rcal_1$ and $\Rcal_2$.
	\end{itemize}
	We define two algebras which will serve as representatives of the two isomorphism classes of quaternion algebras over $k$.

	\paragraph{Split case} Let $V$ be a $2$-dimensional vectorspace over $k$. Then $\Acal=\End_k(V)$ is \textbf{the split quaternion algebra} over $k$. %If we pick a basis $e_1,e_2$ for $V$, and dual basis $e_1^*,e_2^*$ of $V^*$ and define coordinate functions $\Acal \to k$ by $a(x) = e_1^*(x e^1)$, $b(x) = e_2^*(x e^1)$, $c(x) = e_1^* (x e^2)$, $d(x) = e_2^*(x e_2)$. Relative to these coordinates,  one may identify $\Acal$ with the algebra $M(2,k)$ of $2\times 2$ matrices via the assignment $x \mapsto \tbt{a(x)}{b(x)}{c(x)}{d(x)}$.


	We say a finitely generated $R$-submodule $L$ of $V$ is a(n R-)lattice (in $V$) if $kL=V$. Then $L$ is a lattice if and only if it is a compact open subgroup of $V$. For a lattice $L$, we set
	\begin{align}
		\End(L)=\{x \in \End_k(V): xL\subset L\}
	\end{align}
	and for any other lattice $M$, we set
	\begin{align}
		\Hom(L,M)=\{x \in \End_k(V): xL\subset M\}
	\end{align}
	and remark that these are understood \emph{as subrings of} $\End_k(V)$, not merely as abstract rings as the notation might suggest.


	%\begin{def/prop}\label{def/prop:MaximalOrdersAndHomothetyClasses}
	For any lattice $L$ in $V$, the subring $\End(L)$ is a maximal order in $\End_k(V)$. Coversely, any maximal order takes the form $\End(L)$ for some lattice $L$ in $V$. If $\End(L) = \End(M)$ for two lattices $L,M$, then there exists an $x\in k^\times$ such that $M=xL$. In this case, we say that $M$ and $L$ are \textbf{homothetic}. For a lattice $L$, we write $[L]= \{xL : x\in k^\times\}$ for its homothety class.

	If we write $\Bcal(V) \subset V \times V$ for the set of ordered bases of $V$,  $\Lcal(V)$ for the set of lattices in $V$, and $\Hcal\Lcal(V)$ for the set of homothety classes of lattices in $V$, then there are projections:
	\begin{itemize}
		\item $\Span_R:\Bcal(V) \to \Lcal(V)$, sending an ordered basis $(u,v)$ to the lattice $Ru+Rv$, and
		\item $[\cdot]:\Lcal(V) \to \HLcal(V)$, sending a lattice to its homothety class.
	\end{itemize}

	The group of units $\End_k(V)^\times$ in the quaternion algebra $\End_k(V)$ acts simply and transitively on $\Bcal(V)$. As the maps $\Bcal(V)\to \Lcal(V)$ and $\Lcal(V) \to \HLcal(V)$ are both $\GL(V)$ equivariant surjections, we find that $\Aut_k(V)$ acts transtively on these latter two.

	For a lattice $L$, its stabilizer in $\Aut_k(V)$ is the group of units $\End(L)^\times$ in the maximal order $\End(L)$. Thus, we may identify $\Lcal(V)$ with \[\End_k(V)^\times / \End(M)^\times\].
	In this model, the projection $M\mapsto [M]$ of a lattice to its homothety class amounts to the projection
	\[\End_k(V)^\times / \End(M)^\times \to k^\times \lmod \End_k(V)^\times / \End(M)^\times\]
	with $k^\times$ acting by scalars. As this action is central in $\End_k(V)$, we may write this latter quotient as  $\End_k(V)^\times / k^\times \End(M)^\times$.

	% For a lattice $L \in \Lcal(V)$, the group $\GL_R(M) = \End(M)^\times$ acts simply and transitively on the fiber 
	% \begin{align}
	% 	\span_R^\inv(M)=\{(u,v) \in \Bcal(V): Ru+Rv=M\}.
	% \end{align}

	The group $k^\times$ acts transitively on the fibers of the projection $\Lcal(V) \to \HLcal(V)$ by definition, however, it does not do so freely. Rather, the subgroup $R^\times$ of $k^\times$ acts
	\begin{rem}
		As $\Bcal(V)$ is a (Zariski open) subset of $V\times V \setminus {(0,0)}$ which is $k^\times$-stable, there is also a map $\Bcal(V) \to \Pbb(V\times V) \approx \Pbb^3(k)$....
	\end{rem}

	Now, Write $\Mcal\Ocal(V)$ for the set of maximal orders in $\End_k(V)$.  The group $\End_k(V)^\times$ acts on $\mathcal{MO}(V)$ by conjugation $\Rcal \mapsto \Rcal^g=g\Rcal g^\inv$.
	\begin{prop}
		The map $L \to \End(L)$ induces an $\End_k(V)^\times$ equivariant bijection between $\HLcal(V)$ to $\MOcal(V)$.
	\end{prop}
	As $\End_k(V)^\times$ acts transitively on the former, it also does so on the latter $\MOcal(V)$. In other words, we have:
	\begin{prop}
		Any two maximal orders in $\End_k(V)$ are conjugate.
	\end{prop}

	To make all of this explicit, pick basis vectors $e_1,e_2$ and identify $V$ with $k^2$. Then $\End_k(V)$ is identified with the algebra $M(2,k)$ of $2\times 2$ matrices over $k$, the lattice $L_o=Re_1+Re_2$ corresponds to $R^2 \subset k^2$, and the maximal order $\End(L_o)$ corresponds to the subring $M(2,R)$ of $M(2,k)$ with entries in $R$. We may then identify $\MOcal(V)$ with the quotient  $\GL(2,k) / k^\times \GL(2,R)$.
\end{proof}




%\item All maximal orders are conjugate by an element of $\Aut_k(V)$. 
%is an order, and is equal to $\End(L) \cap \End(M)$. In particular, it is a suborder of $\End(L)$ and $\End(M)$ and is the maximal suborder with this property. 
%It is contained in both $\End(L)$ and $\End(M)$ and is the maximal suborder of $\End(L)$ and $\End(M)$ with this property. In other words, $\Hom(L,M) = \End(L)\cap \End(M)$.

% \end{def/prop}



%Let $V$ be a $2$-dimensional vector space over $k$.  and fix basis vectors $e_1$, $e_2$ for $V$.

%We define an isomorphism $\cdot^t:V \to V^*$ extending the assignment of the basis $\{e_1,e_2\}$ to its dual basis $\{e_1^t,e_2^*\}$. 