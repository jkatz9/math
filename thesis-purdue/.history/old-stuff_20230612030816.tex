\begin{comment}
Let $R$ be a commutative ring (with 	$). An algebra $(A,\iota)$ over $R$ is an associative ring $A$ with 	$ equipped with an embedding $\iota : R \to A$ of rings, mapping 	 \in R$ to 	 \in A$ such that $\iota(R)$ is contained in the center of $A$. Using $\iota$, we identify $R$ with a central subring of $A$ and suppress reference to $\iota$.

A \textbf{standard involution} on $B$ is an anti-involution $\overline{\cdot}: A \to A$ such that $x\overline{x} \in A$ for all $x\in A$. Given a standard involution on $A$, define the \textbf{reduced trace},\textbf{reduced norm}, and \textbf{characteristic polynomial} of an element of $A$ by
\begin{align*}
    \trd:         & A \to R, \quad \trd(x)    & = x + \overline{x}         \\
    \nrd:         & A \to R, \quad \nrd(x)    & = x\overline{x}            \\
    \mu(\cdot;T): & A \to R[T] \quad \mu(x;T) & = T^2 - \tr(x) T +\nrd(x).
\end{align*}

\end{comment}
\begin{comment}
In this section $R$ is an integral domain, and $k$ is its field of fractions, and $A$ a finite dimensional algebra over $k$ with unit element 	_A$. A finitely generated $R$-submodule $M$ of $A$ is a \textbf{lattice}, and is \textbf{full} if $kM=A$. A full lattice in $A$ is an \textbf{order} if it is a subring containing 	_A$.

Given a full lattice $M$ in $A$, the sets
\begin{align*}
    \Ocal_\ell(M)= \{ x \in A: xM \subset M\} \\
    \Ocal_r(M)= \{ x \in A: Mx \subset M\}
\end{align*}
are orders in $A$, and are called the \textbf{left}/\textbf{right} orders of $M$ respectively.
\begin{defn}

\end{defn}
\end{comment}

% \begin{rem}
% 	The reduction map $R \to R/\afrak$ induces a projection $\Ocal \to \Ocal \otimes_R R/\afrak \approx \Ocal / \afrak \Ocal$ of algebras, and in turn a projection $\pi_\afrak:\Ocal^1 \to (\Ocal \otimes_R R/\afrak)^1$ of groups. Then $\Ocal^1(\afrak) = \ker \pi_\alpha$.
% \end{rem}

% \subsection{Length spectra of arithmetic Fuchsian groups}
% Fix an arithmetic datum $(k,A,\psi,\Ocal)$ as above such that $\Ocal$ is a \emph{maximal order} in $A$, and set $\Gamma = \Gamma_{k,A,\psi,\Ocal}$. In this section, we will compute the length spectrum of the surface $X=\Gamma \lmod \Hbb$ in terms of the arithmetic of $k$.

% \subsubsection*{Geodesics as conjugacy classes}
% The quotient map $\Hbb \to \Gamma \lmod \Hbb = X$ is the universal cover, and identifies $\Gamma$ with $\pi_1(X)$. Consequently, we may identify free homotopy classes of closed curves in $X$ with conjugacy classes in $X$. As $X$ has negative curvature, there is a unique geodesic representative in each free homotopy class on $X$. Thus, we may identify the set of geodesics on $X$ with conjugacy classes in $\Gamma$. Given a conjugacy class $\gamma \subset \Gamma$, we write $\ell(\gamma)$ for the length of the corresponding geodesic.  Each $g\in \gamma$ has a unique lift $\tilde{g}$ to $\SL(2,\Rbb)$ with positive trace. We write $\tr(g)$ for $\tr(\tilde{g})$, and set
% \begin{align*}
% 	\lambda_g = \frac{t_g + \sqrt{t_g^2 - 4}}{2}.
% \end{align*}
% Then the length of the geodesic corresponding to $\gamma$ is related to $\lambda_g$ by the formula:
% \begin{align*}
% 	\lambda_g^2 = \exp(\ell(g)).
% \end{align*}

% \subsubsection*{Conjugacy classes in quaternion algebras and orders}
% In this section $F$ is a number field with number field $R$, $A$ a quaternion algebra over $F$, and $\Ocal$ a maximal order in $A$.

% The algebra $A$ is equipped with an (anti-)involution $\overline{\cdot}$ and reduced norm/trace maps:
% \begin{align*}
% 	\trd(x) & = x+\overline{x} \\
% 	\nrd(x) & = x\overline{x},
% \end{align*}
% and every element $x\in A$ satisfies its characterstic polynomial
% \begin{align*}
% 	\chi(x;T)= T^2 - \trd(x) T + \nrd (x).
% \end{align*}

% Given an element $x\in A$, let $F[x] \subset A$ be the smallest $F$-subalgebra of $A$ containing $x$.
% \begin{claim}
% 	For $x\in A$, set $\delta=\delta(x)$
% 	\begin{align*}
% 		F[x] \approx \begin{cases}
% 			             F                 & \text{ if $x\in F$}                                                     \\
% 			             F \oplus F        & \text{if $\delta \in  (F^\times)^2$ and $x\notin F$}                    \\
% 			             F[\sqrt{\delta}]  & \text{if $\delta \in  F^\times \setminus (F^\times)^2$ and $x\notin F$} \\
% 			             F[\eps]/(\eps^2 ) & \text{if $\delta=0$ and $x\notin F$},
% 		             \end{cases}
% 	\end{align*}
% 	as $F$-algebras.
% \end{claim}
% We say $x\in A$ is semsimple in the first three cases, and regular semisimple in the second and third cases.

% \begin{claim}
% 	If $x \in A^\times$ is noncentral, then the centralizer of $x$ in $A^\times$ is $F[x]^\times$.
% \end{claim}

% We view $A$ as four dimensional affine space over $F$, and write $F[A]$ for its coordinate ring. Then $A^\times$ is the principal open subvariety of $A$ defined by the nonvanishing of $\nrd$. Its coordinate ring  $F[A^\times]$ is the localization $F[A]_{\nrd} = F[A,\nrd^{\inv}]$ of $F[A]$ away from the zero locus of $\nrd$.

% For $g \in A^\times$ and $f\in F[A]$ or $F[A^\times]$, write  $f^g$ for the function $x \mapsto  f( g x g^\inv)$. For $x\in A$, write $O(x) = \{ x^g : g \in A^\times\}\subset A$ for its orbit under conjugation by $A^\times$.

% \begin{claim}\label{orbits}
% 	For noncentral $x\in A^\times$, the orbit $O(x)$ is Zariski-closed in $A$ (and $A^times$) if and only if $x$ is not parabolic. All parabolic elements in $A^\times$ constitute a single conjugacy class, and the Zariski closure of this class is zero locus of $\delta = \trd^2-4\nrd$.
% 	% say $\Ucal$. The complement of $\Ucal$ in its Zariski closure $\overline{\Ucal}$ is the center $F^\times$ of $A^\times$. 
% \end{claim}
% \begin{claim}
% 	\begin{enumerate}
% 		\item The algebra $F[A]^{A^\times}$ of invariants in $F[A]$  under $A^\times$ is generated as an $F$ algebra by $\trd$ and $\nrd$.
% 		\item The map $(\trd,\nrd):A \to \Abb_F^2$ dual to the inclusion $F[A]^{A^\times} \to F[A]$ is a GIT quotient for the conjugation action of $A^\times$ on $A$ in the sense that its fibers are Zariski closures of conjugacy classes.
% 		\item The restriction of $(\trd,\nrd)$ to the open subset $A^{*}$ of regular semisimple elements is a genuine orbit map, in the sense that its fibers are $A^\times$ conjugacy classes in $A$.
% 	\end{enumerate}
% \end{claim}

Let $\tilde{\Lambda}$ be the \textbf{congruence closure} of $\Lambda$ in $\Gamma$. That is, $\tilde{\Lambda}$ is the smallest congruence subgroup of $\Gamma$ containing $\Lambda$. Alternatively, one has the description of $\tilde{\Lambda}$ as $\tilde{\Lambda} = \bigcap_{J \triangleleft R}\Gamma(J)\Lambda$.

\begin{claim}\label{claim:modJ}
    Let $J$ be an ideal in $R$  and $H$ a subgroup of $\Gamma$. Then the following are equivalent:
    \begin{enumerate}
        \item $H\Gamma(J) = \Gamma$
        \item $H\cap \Gamma(J) = \Gamma(J)$
        \item The restriction of the natural projection $\Gamma \to \Gamma/\Gamma(J)$ to $H$ is surjective
    \end{enumerate}
    Furthermore, if $J=\prod_\pfrak \pfrak^{j_\pfrak}$ then each of these conditions holds if and only if it holds at $\pfrak^{j_\pfrak}$.
\end{claim}

\begin{claim}
    Let $J$ be an ideal in $R$ which is coprime to $I$. Then $\Lambda \Gamma(J) = \Gamma$.
\end{claim}
\begin{proof}
    By the previous claim, it suffices to assume that $J= \pfrak^n$ is a prime power.
\end{proof}


\begin{comment}
\begin{rem}
    As $\Lambda$ and $\Gamma(I)$ are contained in $\Gamma$ and $\Gamma(I)$ is normal in $\Gamma$, the subgroup $\Gamma(I)\Lambda$ of $\Gamma$ is a congruence subgroup containing $\Lambda$.
    Consequently, $\tilde{\Lambda}\leq \Gamma(I)\Lambda$.
    Further, if we write $\Lambda(I) = \Gamma(I) \cap \Lambda$ for the kernel of the restriction to $\Lambda$ of $\pi_I$ (reduction mod $I$), then $\Gamma(I)\Lambda/\Gamma(I) \approx \Lambda / \Lambda(I)$ may be identified with a subgroup of $\SL(2,R/I)$ in such a way that the mod-$I$ reduction of trace on $\Lambda$ (as an element of $A$) coincides with the trace on $\SL(2,\R/I)$ %(as autormophisms of the free $R/I$ module $(R/I)\bigoplus (R/I)$.)
\end{rem}
\end{comment}


\begin{lemma}
    Let $\pfrak$ be a prime ideal of $R$, not dividing $2$ or $3$. Suppose $H$ is a closed subgroup of $\SL(2,R_\pfrak)$ such that $\tr(H) = R_\pfrak$. Then $H = \SL(2,R_\pfrak)$.
\end{lemma}
\begin{proof}
    The claim will follow from the analogous statement over the residue field $\kfrak = R/\pfrak$. Indeed, if $H$ is a closed, proper subgroup of $\SL(2,R_\pfrak)$ for which $\tr(H) = R_\pfrak$, then its reduction $H(\pfrak)$ mod $\pfrak$ would be a proper subgroup of $\SL(2,\kfrak_\pfrak)$ for which $\tr H(\pfrak) = \kfrak_\pfrak$.

    Suppose then that $G \leq \SL(2,\Fbb_q)$ is a subgroup for which $\tr(G) = \Fbb_q$. Let $\zeta$ be a primitive $q-1$st root of unity in $\Fbb_q$, and let $\delta$ be a primitive $q+1$st root of unity in the unique quadratic extension $\Fbb_{q^2}$ over $\Fbb_{q}$. Let $t_\zeta = \zeta+ \zeta^\inv$ and $t_\delta = \delta +\delta^\inv$

    As $\tr(G) = \Fbb_q$, there exist elements $g_\zeta$ and $g_\delta$ in $K$ such that $\tr(g_\zeta)=t_\zeta$ and $\tr(g_\delta)= t_\delta$ respectively. Note that $g_\zeta$ (resp. $g_\delta$) has order $q-1$ (resp. $q+1$), as can be seen by diagonalizing. Set $A = \langle g_\zeta\rangle$ and $K = \langle g_\delta \rangle$, and note that $A\cap K = \{1\}$.

    Let $C$ be the subgroup of $G$ generated by $A$ and $K$. Then $|C|\geq (q-1)(q+1)=|A||K|$, so that $|\SL(2,\Fbb_q) : C| \leq q$. As the minimal index of a proper subgroup of $\SL(2,\Fbb_q)$ is $q+1$, we conclude that $C$, and therefore $G$, is equal to $\SL(2,\Fbb_q)$.
\end{proof}


\section{local computations}
In this section, $k$ is a nonarchimedian local field of characteristic zero, $\nu$ a normalized additive valuation, $R$ its valuation ring, $\mfrak$ the unique maximal ideal of $R$, uniformizer $\varpi \in \mfrak$, and residue field $\kfrak$ of characterstic $p$ and cardinality $q$.


\subsection*{Split case}
In this section, let $G=\SL(2,k)$. Define closed subgroups
\begin{align*}
    A & = \{ \Tbt{x}{}{}{x^\inv}: x \in k^\times \}              \\
    U & = \{ \Tbt{1}{y}{}{1}: y \in k \}                         \\
    B & = \{\Tbt{x}{y}{}{x^\inv} : x \in k^\times, y \in k\}=AU,
\end{align*}
and elements
\begin{align*}
    w      & = \Tbt{0}{-1}{1}{0} \\
    \alpha & = \Tbt{\pi}{}{}{1}
\end{align*}
of $\GL(2,k)$.

For a positive integer $n$, let $\pi_n : \SL(2,R) \to \SL(2,R/\mfrak^n)$ be the natural projection. For any subgroup $H$ of $G$, we set $H(R) = H \cap \SL(2,R)$, and $H(\mfrak^n)= \ker (\pi_n\vert_H)$.

\begin{claim}
    (a) $K=\SL(2,R)$ is a maximal compact open subgroup of $G$. (b) The subgroups $K(\mfrak^n)$ constitute neighborhood basis of the identity in $K$. (c) There are exactly two conjugacy classes of maximal compact open subgroups of $G$. Representatives for these classes are given by $K$ and $\alpha K \alpha^\inv$.
\end{claim}






\subsection*{poo}
Let $V$ be a $2$-dimensional vectorspace over $k$. Then $\End_k(V)$ is a quaternion algebra over $k$. Let $\Mcal$ denote the set of maximal orders in $\End_k(V)$.

For any lattice $L$ in $V$, the set
\begin{align*}
    \End(L) = \{x \in \End_k(V): x L \leq L\}
\end{align*}
is a maximal order in $\End_k(V)$, and every maximal order in $\End_k(V)$ takes the form $\End(L)$ for some lattice $L$ in $V$. Thus, the map $L \mapsto \End(L)$ is a surjection from the set  $\Lcal$ of lattices in $V$ to the set $\Mcal$ of maximal orders in $\End_k(V)$.

Two lattices $L,M$ satisfy $\End(L)=\End(M)$ if and only if $L=s M$ for some $s\in k^\times$. In this case, $L$ and $M$ are said to be \textbf{homothetic}, and we write $[L]$ for the homothety class of a lattice $L$.  Evidently, the map $L \mapsto \End(L)$ factors through the projection $L\mapsto [L]$ and establishes a bijection between the set $\Hcal$ of homothety classes of lattices in $V$ and the set $\Mcal$ of maximal orders in $\End_k(V)$.

There is a natural action of $\PGL(V)$ on $\Hcal$ by left muliplication, and on $\Mcal$ by conjugation. The bijection $\Hcal \to \Mcal$ described above is $\PGL(V)$ equivariant. The stabilizer of a homothety class $\Lambda$ is $\PGL(L) = R^\times \lmod \GL(L)$ where $L$ is a lattice representing $\Lambda$, and $\GL(L) = \{x \in \End_k(V): xL = L\}$, and the stabilizer of a maximal order $\Ocal$ is the image in $\PGL(V)$ of the group $\{x \in \GL(V) : x \Ocal x^\inv = \Ocal\}$.



% For a pair of homothety classes $\Lambda,\Lambda' \in \Hcal$, choose representatives $L \in \Lambda,L'\in\Lambda'$ so that $L'\leq L$. Then by the invariant factor theorem over $R$, we may pick a basis $u,v$ for $L$ such that $\pi^a u, \pi^b v $ is a basis for $L'$. The quantity $|a-b|$ is independent of the choice of representatives, and defines a distance function $d$ on $\Hcal$. 

We say that two classes $\Lambda,\Lambda' \in \Hcal$ are adjacent, and write $\Lambda\sim\Lambda'$ if there exist representative lattices $L,L'$ such that $\pi L< L'< L$ with strict containment, and we say that two maximal orders $\Ocal,\Ocal' \in \Mcal$ are adjacent, and write $\Ocal\sim \Ocal'$ if  $|\Ocal:\Ocal\cap \Ocal'| = |R:\mfrak|=q$.

\begin{proposition}
    The bijection $\Hcal \to \Mcal$ described above is a $\PGL(V)$ equivariant isomorphism of graphs.
\end{proposition}



For a pair of maximal orders $\End(L)$ and $\End(L')$, the set
\begin{align*}
    \Hom(L,L')= \{ x \in \End_k(V): xL\leq L'\}
\end{align*}
is a right $\End(L)$ module, and a left $\End(L')$ module. The quotients





\section{Some diagrams}
% https://q.uiver.app/?q=WzAsMTIsWzAsMCwiMSJdLFsxLDAsIlxcR2FtbWEoSikiXSxbMiwwLCJcXEdhbW1hIl0sWzMsMCwiXFxHYW1tYS9cXEdhbW1hKEopIl0sWzQsMCwiMSJdLFswLDEsIjEiXSxbMSwxLCJcXExhbWJkYShKKSJdLFsyLDEsIlxcTGFtYmRhIl0sWzMsMSwiXFxMYW1iZGEvXFxMYW1iZGEoSikiXSxbNCwxLCIxIl0sWzEsMiwiXFxHYW1tYShKKVxcY2FwIFxcTGFtYmRhIl0sWzMsMiwiXFxMYW1iZGFcXEdhbW1hKEopL1xcR2FtbWEoSikiXSxbMCwxXSxbMSwyXSxbMiwzXSxbMyw0XSxbNSw2XSxbNiw3XSxbNyw4XSxbOCw5XSxbNiwxLCIiLDEseyJzdHlsZSI6eyJ0YWlsIjp7Im5hbWUiOiJob29rIiwic2lkZSI6InRvcCJ9fX1dLFs3LDIsIiIsMSx7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzgsMywiZV9cXExhbWJkYShKKSIsMix7InN0eWxlIjp7InRhaWwiOnsibmFtZSI6Imhvb2siLCJzaWRlIjoidG9wIn19fV0sWzYsMTAsIiIsMSx7ImxldmVsIjoyLCJzdHlsZSI6eyJoZWFkIjp7Im5hbWUiOiJub25lIn19fV0sWzgsMTEsIiIsMCx7ImxldmVsIjoyLCJzdHlsZSI6eyJib2R5Ijp7Im5hbWUiOiJzcXVpZ2dseSJ9LCJoZWFkIjp7Im5hbWUiOiJub25lIn19fV1d
\[\begin{tikzcd}
        1 & {\Gamma(J)} & \Gamma & {\Gamma/\Gamma(J)} & 1 \\
        1 & {\Lambda(J)} & \Lambda & {\Lambda/\Lambda(J)} & 1 \\
        & {\Gamma(J)\cap \Lambda} && {\Lambda\Gamma(J)/\Gamma(J)}
        \arrow[from=1-1, to=1-2]
        \arrow[from=1-2, to=1-3]
        \arrow[from=1-3, to=1-4]
        \arrow[from=1-4, to=1-5]
        \arrow[from=2-1, to=2-2]
        \arrow[from=2-2, to=2-3]
        \arrow[from=2-3, to=2-4]
        \arrow[from=2-4, to=2-5]
        \arrow[hook, from=2-2, to=1-2]
        \arrow[hook, from=2-3, to=1-3]
        \arrow["{e_\Lambda(J)}"', hook, from=2-4, to=1-4]
        \arrow[Rightarrow, no head, from=2-2, to=3-2]
        \arrow[Rightarrow, squiggly, no head, from=2-4, to=3-4]
    \end{tikzcd}\]







% \begin{itemize}
% 	\item look at the the full set of heat invariants, and argue that they detect variation in curvature eventually
% 	\item apply the theorem of patodi which says that if a closed $d$ manifold $X$ has constant negative curvature, and $M$ is isospectral to $X$ on $p$-forms for $0\leq p \leq d$, then $M$ also has constant negative curvature. Need to argue tho that isospectrality on $0$ forms implies the same for $1$ forms on surfaces (is this true in general?)
% 	\item apply the theorem of BCG which says that, at least for closed $2$ manifolds, within a conformal class of metrics on a closed surface $X$ with fixed volume, the entropy of the geodesic flow is minimized at the unique metric of constant curvature. Here we need to argue that that entropy is, in fact, a spectral invariant.
% \end{itemize}

% From claim \ref{claim:heat},  $\vol(\Lambda \lmod \Hbb^2) = \vol(\Gamma(I) \lmod \Hbb^2)$ and each of these is equal to the respective group's index in $\Gamma$, we find $|\Gamma: \Gamma(I)| = |\Gamma: \Lambda|$.

% \begin{rem}
% 	As $\Gamma(I)$ and $\Lambda$ are both contained in $\Lambda = PO^1 = \pm 1 \lmod O^1$, there is no harm in lifting everything to $O^1$. We do so, and reuse the same notation for lifts.
% \end{rem}



\begin{comment}
At this point, we do not know if $\Lambda$ is a \emph{congruence} subgroup of $\Gamma$. That is, we do not know if $\Lambda = A^1 \cap \prod_{\pfrak} \Clo_\pfrak(\Lambda) = \Lambda$ (product taken inside $(A\otimes \Abb_k)^1$)

(Equivalently, we do not know if $\Gamma(J) \leq \Lambda$ for some ideal $J$ of $R$)
\end{comment}


\begin{comment}
% \part{temp}

% \section{probably useful references}
% \begin{itemize}
% 	\item \cite{chavelEigenvaluesRiemannianGeometry1984} for background on Riemannian geometry.
% 	\item \cite{patodiCollectedPapersPatodi1996} for reflection of curvature variation in spectrum on forms.
% \end{itemize}
\end{comment}
\part{dumpster}
\paragraph{Unramified local computations} In this paragraph, $k$ is a nonarchimedian local field of characteristic $0$, maximal compact subring $R$, with maximal ideal $\mfrak$ with residue field $\ffrak = R / \mfrak$ having characteristic $p$ and cardinality $q$. We fix a uniformizer $\pi \in \mfrak$.

Recall that:
\begin{itemize}
    \item A quaternion algebra $\Acal$ over $k$ is a $4$-dimensional central simple $k$-algebra. Any such algebra is equipped with a canonical pair of homomorphisms $\nrd: \Acal^\times \to k^\times$ and $\trd:\Acal \to k$ called the \textbf{reduced norm} and \textbf{reduced trace}, respectively. We extend $\nrd$ to $\Acal$ by setting $\nrd(x)=0$ if $x\in \Acal \setminus \Acal^\times$. Furthermore, $\Acal$ is equipped with an anti-involution $\sigma$, which is related to $\trd$ and $\nrd$ by the formulas:
          \begin{align}
              \trd(x) = x+x^\sigma, \quad \nrd(x)=xx^\sigma.
          \end{align}
    \item An $R$-order $\Rcal$ in a quaternion algebra $\Acal$ over $k$ is a unital subring which contains $R$ and is such that $k\Rcal = \Acal$, where $k\Rcal$ is the $k$-subalgebra of $\Acal$ generated by $\Rcal$. We say $\Rcal$ is a \textbf{maximal order} if it is not properly contained in any other order.
    \item An order in a quaternion algebra is an \textbf{Eichler Order} if it is the intersection of two (not necessarily distinct) maximal orders. If $\Rcal=\Rcal_1 \cap \Rcal_2$ is an Eichler order, then $\Rcal$ is a maximal subring of both $\Rcal_1$ and $\Rcal_2$.
\end{itemize}
We define two algebras which will serve as representatives of the two isomorphism classes of quaternion algebras over $k$.

\paragraph{Split case} Let $V$ be a $2$-dimensional vectorspace over $k$. Then $\Acal=\End_k(V)$ is \textbf{the split quaternion algebra} over $k$. %If we pick a basis $e_1,e_2$ for $V$, and dual basis $e_1^*,e_2^*$ of $V^*$ and define coordinate functions $\Acal \to k$ by $a(x) = e_1^*(x e^1)$, $b(x) = e_2^*(x e^1)$, $c(x) = e_1^* (x e^2)$, $d(x) = e_2^*(x e_2)$. Relative to these coordinates,  one may identify $\Acal$ with the algebra $M(2,k)$ of $2\times 2$ matrices via the assignment $x \mapsto \tbt{a(x)}{b(x)}{c(x)}{d(x)}$.


We say a finitely generated $R$-submodule $L$ of $V$ is a(n R-)lattice (in $V$) if $kL=V$. Then $L$ is a lattice if and only if it is a compact open subgroup of $V$. For a lattice $L$, we set
\begin{align}
    \End(L)=\{x \in \End_k(V): xL\subset L\}
\end{align}
and for any other lattice $M$, we set
\begin{align}
    \Hom(L,M)=\{x \in \End_k(V): xL\subset M\}
\end{align}
and remark that these are understood \emph{as subrings of} $\End_k(V)$, not merely as abstract rings as the notation might suggest.


%\begin{def/prop}\label{def/prop:MaximalOrdersAndHomothetyClasses}
For any lattice $L$ in $V$, the subring $\End(L)$ is a maximal order in $\End_k(V)$. Coversely, any maximal order takes the form $\End(L)$ for some lattice $L$ in $V$. If $\End(L) = \End(M)$ for two lattices $L,M$, then there exists an $x\in k^\times$ such that $M=xL$. In this case, we say that $M$ and $L$ are \textbf{homothetic}. For a lattice $L$, we write $[L]= \{xL : x\in k^\times\}$ for its homothety class.

If we write $\Bcal(V) \subset V \times V$ for the set of ordered bases of $V$,  $\Lcal(V)$ for the set of lattices in $V$, and $\Hcal\Lcal(V)$ for the set of homothety classes of lattices in $V$, then there are projections:
\begin{itemize}
    \item $\Span_R:\Bcal(V) \to \Lcal(V)$, sending an ordered basis $(u,v)$ to the lattice $Ru+Rv$, and
    \item $[\cdot]:\Lcal(V) \to \HLcal(V)$, sending a lattice to its homothety class.
\end{itemize}

The group of units $\End_k(V)^\times$ in the quaternion algebra $\End_k(V)$ acts simply and transitively on $\Bcal(V)$. As the maps $\Bcal(V)\to \Lcal(V)$ and $\Lcal(V) \to \HLcal(V)$ are both $\GL(V)$ equivariant surjections, we find that $\Aut_k(V)$ acts transtively on these latter two.

For a lattice $L$, its stabilizer in $\Aut_k(V)$ is the group of units $\End(L)^\times$ in the maximal order $\End(L)$. Thus, we may identify $\Lcal(V)$ with \[\End_k(V)^\times / \End(M)^\times\].
In this model, the projection $M\mapsto [M]$ of a lattice to its homothety class amounts to the projection
\[\End_k(V)^\times / \End(M)^\times \to k^\times \lmod \End_k(V)^\times / \End(M)^\times\]
with $k^\times$ acting by scalars. As this action is central in $\End_k(V)$, we may write this latter quotient as  $\End_k(V)^\times / k^\times \End(M)^\times$.

% For a lattice $L \in \Lcal(V)$, the group $\GL_R(M) = \End(M)^\times$ acts simply and transitively on the fiber 
% \begin{align}
% 	\span_R^\inv(M)=\{(u,v) \in \Bcal(V): Ru+Rv=M\}.
% \end{align}

The group $k^\times$ acts transitively on the fibers of the projection $\Lcal(V) \to \HLcal(V)$ by definition, however, it does not do so freely. Rather, the subgroup $R^\times$ of $k^\times$ acts
\begin{rem}
    As $\Bcal(V)$ is a (Zariski open) subset of $V\times V \setminus {(0,0)}$ which is $k^\times$-stable, there is also a map $\Bcal(V) \to \Pbb(V\times V) \approx \Pbb^3(k)$....
\end{rem}

Now, Write $\Mcal\Ocal(V)$ for the set of maximal orders in $\End_k(V)$.  The group $\End_k(V)^\times$ acts on $\mathcal{MO}(V)$ by conjugation $\Rcal \mapsto \Rcal^g=g\Rcal g^\inv$.
\begin{prop}
    The map $L \to \End(L)$ induces an $\End_k(V)^\times$ equivariant bijection between $\HLcal(V)$ to $\MOcal(V)$.
\end{prop}
As $\End_k(V)^\times$ acts transitively on the former, it also does so on the latter $\MOcal(V)$. In other words, we have:
\begin{prop}
    Any two maximal orders in $\End_k(V)$ are conjugate.
\end{prop}

To make all of this explicit, pick basis vectors $e_1,e_2$ and identify $V$ with $k^2$. Then $\End_k(V)$ is identified with the algebra $M(2,k)$ of $2\times 2$ matrices over $k$, the lattice $L_o=Re_1+Re_2$ corresponds to $R^2 \subset k^2$, and the maximal order $\End(L_o)$ corresponds to the subring $M(2,R)$ of $M(2,k)$ with entries in $R$. We may then identify $\MOcal(V)$ with the quotient  $\GL(2,k) / k^\times \GL(2,R)$.
\end{proof}




%\item All maximal orders are conjugate by an element of $\Aut_k(V)$. 
%is an order, and is equal to $\End(L) \cap \End(M)$. In particular, it is a suborder of $\End(L)$ and $\End(M)$ and is the maximal suborder with this property. 
%It is contained in both $\End(L)$ and $\End(M)$ and is the maximal suborder of $\End(L)$ and $\End(M)$ with this property. In other words, $\Hom(L,M) = \End(L)\cap \End(M)$.

% \end{def/prop}



%Let $V$ be a $2$-dimensional vector space over $k$.  and fix basis vectors $e_1$, $e_2$ for $V$.

%We define an isomorphism $\cdot^t:V \to V^*$ extending the assignment of the basis $\{e_1,e_2\}$ to its dual basis $\{e_1^t,e_2^*\}$.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2023-06-12
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% To proceed, we need the following lemmata
% \begin{lemma}[Lemma 4.1 in \cite{leiningerLengthEigenvalueEquivalence2007}]
% 	Suppose $n \geq 1$. There is an exact sequence
% 	\begin{align*}
% 		1 \to \sl(2,R_\pfrak/\pfrak^n) \to \SL(2,R_\pfrak/ \pfrak^{2n}) \to \SL(2,R_\pfrak/\pfrak^n) \to 1
% 	\end{align*}
% 	The conjugation action of $\SL(2,R_\pfrak/\pfrak^n)$ on $\sl(2,R_\pfrak/\pfrak^n)$ induced by this sequence is the adjoint action.
% \end{lemma}
% \begin{proof}
% 	The inclusion $R_\pfrak/\pfrak^n \to R_\pfrak / \pfrak^{2n}$ by $a \mapsto \varpi^n a$ induces an inclusion of $M(2, R_\pfrak/\pfrak^n) \to M(2,R_\pfrak/\pfrak^{2n})$ by $X \mapsto \varpi^n X$.

% 	Reduction modulo $\pfrak^n$ induces a surjection $\pi : \SL(2,R_\pfrak/\pfrak^{2n}) \to \SL(2,R_\pfrak/\pfrak^n)$ which has kernel
% 	\begin{equation}\label{eq:kerpi}
% 		\ker \pi = \{ \id + \varpi^n X : \det(\id + \varpi^n X)=1\}.
% 	\end{equation}
% 	Compute, for $\id + \varpi^n X \in \ker \pi$:
% 	\begin{equation*}\det(\id + \varpi^n X) = 1 + \varpi^n \tr X +\varpi^{2n} \det X =1 + \varpi^n \tr X \in R_\pfrak / \pfrak^{2n}\end{equation*}
% 	so that $\tr X = 0 \in R_\pfrak/ \pfrak^n$, which is to say $X \in \sl(2,R_\pfrak/\pfrak^n)$.

% 	Last, observe that the map $X \mapsto 1 + \varpi^n X$ is indeed a homomorphism $\sl(2,R_\pfrak/\pfrak^n) \to \SL(2,R_\pfrak / \pfrak^{2n})$: for  $X,Y \in \sl(2,R/\pfrak^n)$ compute
% 	\begin{align*}
% 		(1+\varpi^n X)(1+\varpi^n Y) = 1 + \varpi^n (X+Y) + \varpi^{2n}(XY) = 1 + \varpi^n (X+Y)
% 	\end{align*}
% 	in $\SL(2,R_\pfrak/\pfrak^{2n})$, as claimed.
% \end{proof}
\newpage
% \begin{lemma}
% 	For each $n>1$, and each prime $\pfrak$ over which $A$ is unramified, the map
% 	\begin{align}\label{eq:liealgebra}
% 		g \mapsto (g - 1)/\varpi^n
% 	\end{align}
% 	induces an isomorphism $O^1(\pfrak^n)/O^1(\pfrak^{n+1}) \approx \sl(2,\kfrak_\pfrak)$. The action of $O^1$ on $O^1(\pfrak^n)/O^(\pfrak^{n+1})$ by conjugation factors through the quotient $O^1[\pfrak] \approx \SL(2,\kfrak_\pfrak)$, and the isomorphism induced by \ref{eq:liealgebra} intertwines the conjugation action with the adjoint action.
% \end{lemma}

% \begin{lemma}
% 	The quadratic form $X \mapsto \det x$ on $\sl(2,\kfrak_\pfrak)$ is invariant under the adjoint action of $\SL(2,\kfrak_\pfrak)$. Let $\Ncal$ denote the
% \end{lemma}


% If each $g\in \Lambda$ is such that $\gamma \in \pfrak M(2,\R_\pfrak)$, then the claim is proven. Supposing otherwise. 

% To this end, we apply the following form of strong approximation:

% \begin{proposition}[Strong Approximation Theorem \cite{maclachlanArithmeticHyperbolic3Manifolds2003}]
% 	Let $A$ be a quaternion algebra over a number field $k$, and let $S$ be a finite set of places of $k$ such that $S\cap V_k^\infty \neq \emptyset$ and, for at least one $v_o \in S$, $v_o \notin \Ram(A)$. Then $A^1_k A^1_S $ is dense in $A^1_{\Abb_k}$.
% \end{proposition}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

